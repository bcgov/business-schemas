{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://bcrs.gov.bc.ca/.well_known/schemas/relationship",
    "type": "object",
    "title": "The Relationship Schema",
    "definitions": {
        "role": {
            "type": "object",
            "properties": {
                "identifier": {
                    "type": "string",
                    "maxLength": 36
                },
                "appointmentDate": {
                    "type": "string",
                    "format": "date"
                },
                "cessationDate": {
                    "type": [
                        "string",
                        "null"
                    ],
                    "format": "date"
                },
                "roleType": {
                    "enum": [
                        "Applicant",
                        "Completing Party",
                        "Custodian",
                        "Director",
                        "Incorporator",
                        "Liquidator",
                        "Officer",
                        "Partner",
                        "Proprietor",
                        "Receiver",
                        "CEO",
                        "CFO",
                        "President",
                        "Vice President",
                        "Chair",
                        "Treasurer",
                        "Secretary",
                        "Assistant Secretary",
                        "Other"
                    ]
                },
                "roleClass": {
                    "enum": [
                        "ATTORNEY",
                        "AGENT",
                        "DIRECTOR",
                        "OFFICER"
                    ]
                }
            },
            "required": [
                "roleType"
            ]
        },
        "relationship": {
            "type": "object",
            "properties": {
                "actions": {
                    "type": "array",
                    "items": {
                        "enum": [
                            "ADDED",
                            "ADDRESS_CHANGED",
                            "EMAIL_CHANGED",
                            "NAME_CHANGED",
                            "REMOVED"
                        ]
                    }
                },
                "entity": {
                    "anyOf": [
                        {
                            "$ref": "https://bcrs.gov.bc.ca/.well_known/schemas/person",
                            "required": ["familyName"]
                        },
                        {
                            "$ref": "https://bcrs.gov.bc.ca/.well_known/schemas/organization",
                            "required": ["businessName"]
                        }
                    ]
                },
                "deliveryAddress": {
                    "$ref": "https://bcrs.gov.bc.ca/.well_known/schemas/address"
                },
                "mailingAddress": {
                    "$ref": "https://bcrs.gov.bc.ca/.well_known/schemas/address"
                },
                "roles": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                        "$ref": "#/definitions/role"
                    }
                }
            },
            "required": [
                "roles",
                "entity",
                "deliveryAddress",
                "mailingAddress"
            ]
        }
    },
    "properties": {
        "relationships": {
            "type": "array",
            "minItems": 1,
            "items": {
                "$ref": "#/definitions/relationship"
            }
        }
    },
    "required": [
        "relationships"
    ]
}
